<!doctype html>

<html>

  <head>
    <meta charset="utf-8">
    <title>
      Units-Toolbox
    </title>
    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>

  <body>
    <div class="settings"> <div class="cat_bg"></div>
      <div class="padder">
        <form name="pb-form" method="post">
          <div class="pb-activate">
            <div class="config-text h3">Aktivera pushbulletmeddelanden</div>
            <label class="switch">
              <input type="hidden" name="pbOff" value="false">
              <input type="checkbox" name="pbOnSwitch" id="pb-switch" $pbState onchange="disablePBInput(); disableSubmit();">
              <div class="slider round"></div>
            </label>
          </div>
          <br><br>
          <div class="config-text">PushbulletAPI-nyckel:</div>
          <input type="text" name="pbKey" value="$pbKey" class="pb-input" $pbInputDisabled onkeyup="disableSubmit();"><br>
          <div class="config-text">Pushbulletkanal-namn:</div>
          <input type="text" name="pbChannel" value="$channelName" class="pb-input" $pbInputDisabled onkeyup="disableSubmit();"><br><br>
          <input type="submit" id="submitbutton">
          <script>
            function disablePBInput() {
              var elements = document.getElementsByClassName('pb-input');
              for (var i = 0; i < elements.length; i++) {
                elements[i].disabled = !document.getElementById("pb-switch").checked;
              }
            }

            function disableSubmit() {
              var f = document.getElementsByClassName('pb-input');
              var cansubmit = true;

              for (var i = 0; i < f.length; i++) {
                if (f[i].value.length == 0) cansubmit = false;
              }
              pbactive = document.getElementById("pb-switch").checked;

              document.getElementById('submitbutton').disabled = !(pbactive ? cansubmit : true);
            }
            </script>
          </form>
        </div>
    </div>
  </body>

</html>
